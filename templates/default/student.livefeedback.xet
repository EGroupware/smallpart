<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE overlay PUBLIC "-//EGroupware GmbH//eTemplate 2.0//EN" "https://www.egroupware.org/etemplate2.0.dtd">
<overlay>
	<template id="smallpart.student.livefeedback">
		<et2-hbox disabled="!@is_staff">
			<smallpart-media-recorder id="lf_recorder" videoName="@video[video_name]" disabled="!@video[livefeedback_session]=/(running|not-started)/" width="24em"/>
			<details title="Livefeedback Reports" class="livefeedbackReport textH2 tasks">
				<smallpart-livefeedback-report id="lf_report" width="50%"></smallpart-livefeedback-report>
			</details>
			<hbox width="30%">
				<et2-button id="lf_publish" label="Publish" onclick="app.smallpart.livefeedback_publishBtn"></et2-button>
				<et2-label id="counter" class="counter" disabled="@video[video_published]=1"></et2-label>
				<smallpart-timer id="lf_timer" uniqueId="@video[video_id]" disabled="@video[video_published]=0" class="lf_timer" hideReset="true" onPause="app.smallpart.livefeedback_timerStop" onResume="app.smallpart.livefeedback_timerStart"/>
			</hbox>
		</et2-hbox>
		<et2-hbox disabled="@is_staff">
			<et2-description value="This livefeedback session has not been started yet." disabled="@video[livefeedback_session]=running"/>
			<et2-box id="lf_recording" class="lf_recording" disabled="!@video[livefeedback_session]=running"/>
		</et2-hbox>
		<et2-vbox class="commentEditArea" disabled="@video[livefeedback_session]=not-started">
			<template id="smallpart.student.livefeedback.cats" disabled="!@is_staff"/>
			<template id="smallpart.student.livefeedback.cats.student" disabled="@is_staff"/>
		</et2-vbox>
	</template>
	<template id="smallpart.student.livefeedback.cats">
		<et2-label class="textH2" value="@video[video_name]"/>
		<grid id="cats" width="100%" class="commentRadioBoxArea egwGridView_grid">
			<columns>
				<column width="100%"/>
			</columns>
			<rows>
				<row id="${row}" class="row">
					<et2-vbox>
						<et2-details class="parent" open="true">
							<smallpart-lf-button id="$row_cont[cat_id]" label="$row_cont[cat_name]" slot="summary" color="$row_cont[cat_color]" class="main"></smallpart-lf-button>
							<smallpart-lf-radioButton id="$row_cont[cat_id]:subs" onlyLiveFeedback="true" parentId="$row_cont[cat_id]"></smallpart-lf-radioButton>
							<details title="description">
								<et2-textarea id="$row_cont[cat_id]:comment" class="et2_fullWidth" width="100%" rows="3"></et2-textarea>
							</details>
							<et2-button id="$row_cont[cat_id]:submit" label="send feedback" onclick="app.smallpart.student_livefeedbackSubCatClick"></et2-button>
							<et2-label id="$row_cont[cat_id]:timer" class="counter" disabled="true"/>
						</et2-details>
					</et2-vbox>
				</row>
			</rows>
		</grid>
	</template>
	<template id="smallpart.student.livefeedback.cats.student">
		<et2-label class="textH2" value="@video[video_name]"/>
		<grid id="cats" width="100%" class="commentRadioBoxArea egwGridView_grid">
			<columns>
				<column width="100%"/>
			</columns>
			<rows>
				<row id="${row}" class="row">
					<et2-vbox>
						<et2-details class="parent" open="true">
							<smallpart-lf-button id="$row_cont[cat_id]" label="$row_cont[cat_name]" slot="summary" color="$row_cont[cat_color]" class="main"></smallpart-lf-button>
							<smallpart-lf-radioButton id="$row_cont[cat_id]:subs" onlyLiveFeedback="true" parentId="$row_cont[cat_id]" onclick="app.smallpart.student_livefeedbackSubCatClick"></smallpart-lf-radioButton>
							<et2-label id="$row_cont[cat_id]:timer" class="counter" disabled="true"/>
						</et2-details>
					</et2-vbox>
				</row>
			</rows>
		</grid>
	</template>
</overlay>